<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grava√ß√£o Slow Motion</title>
<style>
body { background:black; color:white; font-family:Arial,sans-serif; text-align:center; margin:0; padding:0; }
h1 { color:gold; margin-top:20px; }
.video-wrapper { width:100%; max-width:500px; margin:20px auto; overflow:hidden; border:2px solid gold; border-radius:10px; }
video { width:100%; display:block; }
button { background:gold; color:black; padding:10px 20px; border:none; border-radius:5px; font-size:16px; margin:10px; cursor:pointer; }
audio { display:none; }
</style>
</head>
<body>

<h1>üé¨ Grava√ß√£o Slow Motion</h1>

<div class="video-wrapper">
  <video id="camera" autoplay muted playsinline></video>
</div>

<button id="startBtn">‚ñ∂Ô∏è Gravar 10s</button>

<h2>üìΩÔ∏è Playback</h2>
<div class="video-wrapper">
  <video id="finalVideo" controls></video>
</div>

<audio id="bgAudio" src="audio.mp3" loop autoplay></audio>

<script>
const camera = document.getElementById("camera");
const finalVideo = document.getElementById("finalVideo");
const audio = document.getElementById("bgAudio");
let stream, mediaRecorder, recordedChunks=[];

// Inicia c√¢mera traseira
async function startCamera() {
  stream = await navigator.mediaDevices.getUserMedia({ video:{ facingMode:"environment" }, audio:false });
  camera.srcObject = stream;
}
startCamera();

document.getElementById("startBtn").addEventListener("click", ()=>{
  recordedChunks=[];
  mediaRecorder = new MediaRecorder(stream);
  mediaRecorder.ondataavailable = e=>{ if(e.data.size>0) recordedChunks.push(e.data); };
  
  mediaRecorder.onstop = ()=>{
    const blob = new Blob(recordedChunks,{type:'video/webm'});
    const url = URL.createObjectURL(blob);
    finalVideo.src = url;
    finalVideo.loop = true;
    finalVideo.play();

    // Slow/Fast alternando
    finalVideo.playbackRate = 0.5;
    setInterval(()=>{
      finalVideo.playbackRate = finalVideo.playbackRate===0.5 ? 2 : 0.5;
    },4000);
  };

  mediaRecorder.start();

  setTimeout(()=>{
    mediaRecorder.stop();
    stream.getTracks().forEach(track=>track.stop());
  },10000);
});
</script>

</body>
</html>
